<!doctype html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>Sweet Vehicule</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="pageResource?page=custompage_sweetvehicule&location=style/animate.css" />
    <link rel="stylesheet" href="pageResource?page=custompage_sweetvehicule&location=style/bootstrap.min.css">
	<link rel="stylesheet" href="pageResource?page=custompage_sweetvehicule&location=style/main.css">
	<link rel="stylesheet" href="pageResource?page=custompage_sweetvehicule&location=style/style.css">
    <link rel="stylesheet" href="pageResource?page=custompage_sweetvehicule&location=style/ng-modal.css">
	<link rel="stylesheet" href="pageResource?page=custompage_sweetvehicule&location=style/angular-material.min.css">

	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript" src="https://www.google.com/uds/?file=visualization&amp;v=1&amp;hl=fr&amp;packages=corechart&amp;async=2"></script>
	<link type="text/css" href="https://www.google.com/uds/api/visualization/1.0/ff67c3772da186a412ae3231c32409e9/ui+fr.css" rel="stylesheet">
	<script type="text/javascript" src="https://www.google.com/uds/api/visualization/1.0/ff67c3772da186a412ae3231c32409e9/format+fr,default+fr,ui+fr,corechart+fr.I.js"></script>
	<link href="https://ajax.googleapis.com/ajax/static/modules/gviz/1.0/core/tooltip.css" rel="stylesheet" type="text/css">

<style>
.Loading {
    display: inline-block;
    vertical-align: middle;
    background-position: center;
    background:no-repeat;
    background-image: url('data:image/gif;base64,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');
    width:20px;
    height:20px;
    margin-top:6px;
    margin-right:7px;
}
.AutocompleteDropDown {
	background-color: #fcf8e3;
	}
</style>


</head>
<body ng-app="sweetmonitor">


<!--  Page Directory: @_PAGEDIRECTORY_@ -->
<center>
	<table><tr><td><h1>Delegation</h1></td><td rowspan="2"><img src="pageResource?page=custompage_sweetvehicule&location=img/remplacement.jpg" width="150" heigth="150" /></td></tr>
		<tr><td style="font-size:0.8em">1.4.0</td></tr>
	</table>
</center>



<!--  Page Directory: @_PAGEDIRECTORY_@ -->

<div class="component"  ng-controller="SweetVehiculeControler as ctrl">
	<div class="col-xs-6">
	
		<legend class="text-primary"><span class="glyphicon glyphicon-th"></span>My Tasks</legend>
	
		<div ng-show="ctrl.inprogress">
			<span class="Loading">.</span>
				Please wait, collect in progress
		</div>
	
		<div>
			 
			<table>
			<tr>
				<td>Delegation :&nbsp;&nbsp;</td>
				<td>
					<button ng-click="ctrl.allMonitoring( false )" ng-disabled="ctrl.inprogress" class="btn btn-default btn-xs">Only my tasks</button>&nbsp;&nbsp;
				</td>
				
				<td><input type=checkbox ng-model="ctrl.mytasks">My tasks&nbsp;&nbsp;</input>
				<td ng-repeat="userinfo in ctrl.listMonitoring track by $index">
							<input type=checkbox ng-model="userinfo.show">{{userinfo.usercompletename}}&nbsp;&nbsp;</input>
				</td>
				
				<td>
					<button ng-click="ctrl.allMonitoring( true )" ng-disabled="ctrl.inprogress" class="btn btn-default btn-xs">All</button>
				</td>
			</tr>
			</table>
		</div>
		<button ng-click="ctrl.myTasks()" ng-disabled="ctrl.inprogress" class="btn btn-info btn-xs">Refresh</button>
	
	
		<table class="table table-striped table-hover table-condensed" style="background-color:#fcf8e3">
			<tr>
				<th></th>
				<th><i class="icon-assigned" title="Available or My tasks"></i></th>
				<th>Owner</th>
				<th>Task Name</th>
				<th>Description</th>						
				<th>Case</th>
				<th>Process Name</th>
				<th>Due date</th>
			</tr>
			<tr ng-repeat="taskinfo in ctrl.listtasks track by $index">
				<td>
					<button ng-click="ctrl.accessTask(taskinfo)" class="btn btn-primary btn-xs">Access</button>
				</td>
				<td><i ng-show="taskinfo.isassigned" class="glyphicon glyphicon-user" title="Available or My tasks">
				</td>
				<td>{{taskinfo.owner}}</td>
				<td>{{taskinfo.taskname}}</td>
				<td>{{taskinfo.description}}</td>
				<td>{{taskinfo.case}}</td>
				<td>{{taskinfo.processname}}</td>
				<td>{{taskinfo.duedate | date}}</td>
				
			</tr>
		</table>
			
		<div ng-bind-html="ctrl.getListEvents( ctrl.listeventaccesstask )"></div>
			
		<hr>
		
			
		<div ng-show="ctrl.managedelegation">
			
			<a href="#" ng-click="ctrl.display.showDelegationSection = ! ctrl.display.showDelegationSection" style="text-decoration:none">					
	  				<span ng-show="ctrl.display.showDelegationSection" class="glyphicon glyphicon-chevron-down"></span>
	 				</a>
			<a href="#" ng-click="ctrl.display.showDelegationSection = ! ctrl.display.showDelegationSection" style="text-decoration:none">					
					<span ng-show="! ctrl.display.showDelegationSection" class="glyphicon glyphicon-chevron-right" ></span>
			</a>
			<div class="label label-default">Delegation</div>
		
			<div ng-show="ctrl.display.showDelegationSection">
				<legend class="text-primary"><span class="glyphicon glyphicon-th"></span>Delegation</legend>
				<button ng-click="ctrl.refreshDelegation()" ng-disabled="ctrl.inprogress" class="btn btn-info btn-xs">Refresh</button>
				<table class="table table-striped table-hover table-condensed" style="background-color:#fcf8e3">
				<tr>
					<th>Name</th>
					<th>Delegator</th>
					<th>From</th>
					<th>To</th>
					<th>Delegates</th>						
					<th></th>
				</tr>
				<tr ng-repeat="delegaterule in ctrl.listDelegations track by $index">
					<td>{{delegaterule.ruleName}}</td>
					<td>{{delegaterule.delegatorCompleteName}}</td>
					<td>{{delegaterule.periodFrom | date}}</td>
					<td>{{delegaterule.periodTo  | date}}</td>
					<td>{{delegaterule.delegateUserSt}}</td>
					<td> <button ng-click="ctrl.editRule(delegaterule)" ng-disabled="ctrl.inprogress" class="btn btn-info btn-xs">Edit</button>
						<button ng-click="ctrl.removeRule(delegaterule)" ng-disabled="ctrl.inprogress" class="btn btn-danger btn-xs">Remove</button>
					</td>
				</tr>
				</table>
				
				<div ng-bind-html="ctrl.getListEvents( ctrl.listeventsruledelete )"></div>
				
				<p>
				<button ng-click="ctrl.addRule()" ng-disabled="ctrl.inprogress" class="btn btn-primary btn-xs">New rule</button>
				<p>			
				
				<!-- Panel RULE  -->
				<div class="panel panel-info"  >
					<div class="panel-heading">
						Rule
					</div>
					<div>
						<table>
						<tr><td style="valign=:top; ">
							<table>
								<tr><td>RuleId</td><td colspan="2">{{ctrl.rule.ruleId}}</td></tr>
								<tr><td>Rule</td><td colspan="2"><input type="text" ng-model="ctrl.rule.ruleName"></td></tr>
								<tr><td>Delegator</td><td>
								
								    	<div ng-show="ctrl.isAdministrator">
											<md-autocomplete md-selected-item="ctrl.rule.selecteduser" md-search-text="ctrl.rule.delegatorCompleteName" md-items="item in ctrl.queryUser( ctrl.rule.delegatorCompleteName )" 
												md-item-text="item.display" md-delay="500"
											 	md-floating-label="User"
							    				md-clear-button="false" 
							    				style="width:300px" 
							    				md-menu-class="AutocompleteDropDown">
												  <span md-highlight-text="ctrl.rule.delegatorCompleteName">{{item.display}}</span>
											</md-autocomplete>
										</div>
										<div ng-show="! ctrl.isAdministrator">
											{{ctrl.rule.delegatorCompleteName}}
										</div>
									</td><td>
											<span ng-show="ctrl.autocomplete.inprogress"   class="Loading"></span>
										</td></tr>
								<tr><td>From</td><td colspan="2"><input type="date" ng-model="ctrl.rule.periodFrom"></td></tr>
								<tr><td>To</td>  <td colspan="2"><input type="date" ng-model="ctrl.rule.periodTo"></td></tr>
							</table>
						</td><td  style="valign=:top; ">
								Delegates
								<table>
									<tr ng-repeat="delegate in ctrl.rule.delegates">
										<td>
											<md-autocomplete md-selected-item="delegate.selecteduser" md-search-text="delegate.delegateCompleteName" md-items="item in ctrl.queryUser( delegate.delegateCompleteName )" 
											md-item-text="item.display" md-delay="500"
										 	md-floating-label="User"
						    				md-clear-button="false" 
						    				style="width:300px" 
						    				md-menu-class="AutocompleteDropDown">
											  <span md-highlight-text="delegate.delegateCompleteName">{{item.display}}</span>
										</md-autocomplete>
										</td>
										<td>
											<span ng-show="ctrl.autocomplete.inprogress"   class="Loading"></span>
											<button ng-click="ctrl.removeDelegate($index)" ng-disabled="ctrl.inprogress" class="btn btn-danger btn-xs">Remove</button>		
										</td>
									</tr>
								</table>
								<button ng-click="ctrl.addDelegate(ctrl.rule)" ng-disabled="ctrl.inprogress" class="btn btn-info btn-xs">Add</button>
						</td></tr>	
						
						<tr><td colspan="2">
							<center><button ng-click="ctrl.saveRule(ctrl.rule)" ng-disable="ctrl.inprogress" class="btn btn-success btn-lg">Save</button>
									<span ng-show="ctrl.inprogress"   class="Loading"></span>
							</center>
							</td>
						</tr><tr>
							<td  colspan="2">
								<div ng-bind-html="ctrl.getListEvents( ctrl.listeventsrule )"></div>
							</td>
						</tr>
						</table>
									
						
					</div>
				</div> <!--  end panel rule -->
			</div> <!--  end showDelegationSection -->
		</div> <!--  end manageDelegationSection -->
		

	</div> <!--  end panel Task + Rule -->
	
	<div class="col-xs-6">
		<div ng-show="! ctrl.inprogress">
		<iframe src="{{ctrl.urlFrameTask}}" width="100%" height="500px">
		</iframe>
		</div>
	</div>

</div>



<!-- Third party dependencies -->

<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/jquery.min.js"></script>

<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/angular.min.js"></script>

<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/angular-resource.min.js"></script>
<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/angular-cookies.min.js"></script>

<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/bootstrap/js/bootstrap.min.js"></script>
<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/angular-bootstrap-tpls.min.js"></script>
<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/angular-file-upload.js"></script>
<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/ng-google-chart.js"></script>
<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/angular-sanitize.min.js"></script>
<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/ng-modal.min.js"></script>

<!--  Material -->
<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/angular-animate.min.js"></script>
<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/angular-aria.min.js"></script>
<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/angular-messages.min.js"></script>
<script src="pageResource?page=custompage_sweetvehicule&location=3rd-party/angular-material.min.js"></script>







<!-- Application dependencies -->
<script src="pageResource?page=custompage_sweetvehicule&location=sweetmonitor.js&t=@_CURRENTTIMEMILIS_@"></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/alasql/0.3/alasql.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.10.3/xlsx.full.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.10.3/xlsx.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.10.3/xlsx.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.10.3/xlsx.core.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.10.3/cpexcel.js"></script>


</body>
</html>